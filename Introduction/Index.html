<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <title>Introduction documentation</title>

    
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="phpdocumentor/guides" name="generator">
<meta content="" name="docsearch:name">
<meta content="" name="docsearch:package_type">
<meta content="" name="docsearch:release">
<meta content="" name="docsearch:version">
<meta content="2024-05-19T17:41:02+00:00" name="docsearch:modified">
<meta content="2024-05-19T17:41:02+00:00" name="dc.modified">
<meta content="2024-05-19T17:41:02+00:00" property="article:modified_time">
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.dc">
<link href="../_resources/css/theme.css" rel="stylesheet">
<link href="https://docs.typo3.org/search/" rel="search" title="Search">
<script src="https://typo3.azureedge.net/typo3infrastructure/universe/dist/webcomponents-loader.js"></script>
<script src="https://typo3.azureedge.net/typo3infrastructure/universe/dist/typo3-universe.js" type="module"></script>
                        <link href="../Index.html" rel="prev" title="Extender: Extbase class extending on steroids"/>
            <link href="../Installation/Index.html" rel="next" title="Installation"/>
            <link href="../Index.html" rel="top" title="Extender: Extbase class extending on steroids"/>
    </head>
<body>
<div class="page">
    
<header>
    <div class="page-topbar">
        <div class="page-topbar-inner">
            <typo3-universe active="documentation">
                <div style="display: block; height: 44px; background-color: #313131;"></div>
            </typo3-universe>
        </div>
    </div>
    <div class="page-header">
        <div class="page-header-inner">
            <div class="row">
                <div class="col-sm-3 col-md-4 col-lg-6">
                    <a class="logo" href="https://docs.typo3.org/" title="TYPO3 Documentation">
                        <img alt="TYPO3 Logo" class="logo-image" src="../_resources/img/typo3-logo.svg" width="484" height="130">
                    </a>
                </div>
                <div class="col-sm-9 col-md-8 col-lg-6">
                    <search role="search">
                        <form action="https://docs.typo3.org/search/search" id="global-search-form" method="get">
			                <div class="sr-only"><label for="globalsearchinput">TYPO3 documentation...</label></div>
                            <div class="input-group mb-3 mt-sm-3">
                                <select class="form-select search__scope" id="searchscope" name="scope">
                                    <option value="">Search all</option>
                                </select>
                                <input autocomplete="off" class="form-control shadow-none" id="globalsearchinput" name="q" placeholder="TYPO3 documentation..." type="text" value="">
                                <button class="btn btn-primary" type="submit"><i class="fa fa-search"></i>&nbsp;<span class="d-none d-md-inline">Search</span></button>
                            </div>
                        </form>
                    </search>
                </div>
            </div>
        </div>
    </div>
</header>    <main class="page-main">
        <div class="page-main-inner">
            <div class="page-main-navigation">
                <nav>
                    <input class="toc-checkbox" id="toggleToc" type="checkbox">

                    
<div class="toc-header">
    <div class="toc-title">
        <a class="toc-title-project" href="../Index.html"></a>
            </div>
    <div class="toc-actions">
        <label class="toc-toggle" for="toggleToc">
            Menu
        </label>
    </div>
</div>                    <div class="toc-collapse">
                                                <div aria-label="main navigation" class="toc" role="navigation">
                                <div aria-label="Main navigation" class="main_menu" role="navigation">
        
    <ul class="menu-level-1">
    <li class=" current active">
    <a href="#" aria-current="page">
        Introduction
    </a></li>    <li class="">
    <a href="../Installation/Index.html">
        Installation
    </a></li>    <li class="">
    <a href="../Configuration/Index.html">
        Configuration
    </a></li>    <li class="">
    <a href="../Breaking/Index.html">
        Breaking change
    </a></li>    <li class="">
    <a href="../Testing/Index.html">
        Testing
    </a></li>    </ul>
    <ul class="menu-level-1">
    <li class="">
    <a href="../Sitemap.html">
        Sitemap
    </a></li>    </ul>
    </div>
    <div aria-label="Meta navigation" class="main_menu  d-block d-lg-none" role="navigation">
    <hr/>
    <p class="caption">Contributors Corner</p>
    <ul class="menu-level-1">            <li><a href="../_sources/Introduction/Index.rst.txt" rel="nofollow noopener" target="_blank">
                    View source of current document
            </a></li>
                    <li><a href="https://docs.typo3.org/m/typo3/docs-how-to-document/main/en-us/WritingDocsOfficial/GithubMethod.html" rel="nofollow noopener" target="_blank">
                    How to edit
            </a></li>
        </ul>
</div>
                        </div>
                    </div>
                </nav>
            </div>
            <div class="page-main-content">
                <div class="rst-content">                        <nav aria-label="breadcrumbs navigation" class="breadcrumb-bar" role="navigation">
        
<ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="../Index.html">Extender: Extbase class extending on steroids</a></li>
                    <li aria-current="page"  class="breadcrumb-item  active">Introduction</li>
        </ol>
        <div class="breadcrumb-additions">    <a class="btn btn-sm btn-light" href="../_sources/Introduction/Index.rst.txt" rel="nofollow noopener" target="_blank">
        <span class="btn-icon"><span class="fas fa-code"></span></span>
        <span class="btn-text">View source</span>
    </a>
        <a class="btn btn-sm btn-light" href="https://docs.typo3.org/m/typo3/docs-how-to-document/main/en-us/WritingDocsOfficial/GithubMethod.html" id="btnHowToEdit" rel="nofollow noopener" target="_blank">
        <span class="btn-icon"><span class="fas fa-info-circle"></span></span>
        <span class="btn-text">How to edit</span>
    </a>
    </div>    </nav>
                    
<article class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
    <div itemprop="articleBody">
        <!-- content start -->
                
<section class="section" id="introduction-1" data-rst-anchor="introduction">
            <a id="introduction"></a>
            <h1>Introduction<a class="headerlink" href="#introduction-1" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            
    <p>This Documentation was written for version 7.0.x of the extension.</p>

            <section class="section" id="extending-classes">
            <h2>Extending classes<a class="headerlink" href="#extending-classes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>The sole purpose of this extension is to fill a gap that extbase leaves open.</p>

            
    <p>As it is not possible to extend classes in extbase directly its sometimes not
possible to add properties and methods to a class. This is valid for all cases
where the class is given as an type hint to an action.</p>

            
    <p>Arguments of an action are mapped from the request to the concrete class by
the argument mapper. The argument mapper does not take TypoScript object
className mapping into account as the property mapper. Due to this its not
possible to just extend the class and have the extends available.</p>

            
    <p>To cope with this and be able to add custom properties to a class the extender
registers a custom spl class loader. This kicks in for every configured class
and required a compiled class from the class cache.</p>

            
    <p>The class cache gets generated on every hit where an configured compilation is
not available and after every clear system cache. In both cases the class cache
manager rebuilds the complete class cache.</p>

            
    <p>As the class cache is registered to the system cache group it gets cleared on
every clear system cache or clear all caches. After that a hook gets called that
rebuilds the class cache. Unless a huge amount of extends are configured there
should be a prefilled class cache on every request.</p>

    </section>
            <section class="section" id="deep-dive-into-an-example">
            <h2>Deep dive into an example<a class="headerlink" href="#deep-dive-into-an-example" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>The cache manager parses the base and extend files to gather the colored parts
of the following images, generates a combined file as shown in the merged result
and adds it to the cache.</p>

            
    
<ol class="bignums">
    <li>
    <p>Base class file</p>
<figure>
    <img
    src="Images/base.png"
                        />


            
            </figure></li>
    <li>
    <p>Extend class file</p>
<figure>
    <img
    src="Images/extend.png"
                        />


            
            </figure></li>
    <li>
    <p>Merged result file</p>
<figure>
    <img
    src="Images/merged.png"
                        />


            
            </figure></li>
</ol>

    </section>
            <section class="section" id="explanation">
            <h2>Explanation<a class="headerlink" href="#explanation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    
<ol class="bignums-attention">
    <li>
    <p>Namespace</p>

    <p>The Namespace is taken from the base file. The namespace of the extended
file is ignored.</p>
</li>
    <li>
    <p>Uses</p>

    <p>All uses from base and extending file are taken uniquely. If an use appears
with diverting as alias it is present twice in the merged file.</p>
        <div class="code-block-caption">
            <span class="caption-text">example of uses appearing twice</span>
        </div><div class="code-block-wrapper" translate="no">
                        
        <pre class="code-block"><code>use Psr\Log\LoggerAwareTrait;
use Psr\Log\LoggerAwareTrait as T;</code></pre>
        <div>
            <button class="code-block-copy" title="Copy to clipboard">
                <i class="fa-regular fa-copy code-block-copy-icon"></i>
                <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
            </button>
            <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
        </div>
    </div></li>
    <li>
    <p>Class</p>

    <p>The class name and the extends part is taken from the base class.</p>
</li>
    <li>
    <p>Implements</p>

    <p>Implements are used uniquely from the base and extend file</p>
</li>
    <li>
    <p>Traits</p>

    <p>All traits from base and extend file are taken uniquely.</p>
</li>
    <li>
    <p>Properties</p>

    <p>All properties from base and extend file are taken without check if they
are not colliding.</p>
</li>
    <li>
    <p>Construct</p>

    <p>The __construct of base and extend file are taken with merged contents and
arguments. Where arguments from base take priority.
All line of code in the method are taken. If the __construct of the extend
file contains a parent::__construct call it gets removed.</p>
</li>
    <li>
    <p>Methods</p>

    <p>All methods beside __construct from base and extend file are taken without
check if they are not colliding.</p>
</li>
    <li>
    <p>Comment</p>

    <p>The comment is based on the base and extending files and display which
files path were taken into account.</p>
</li>
</ol>

    </section>
            <section class="section" id="example-source">
            <h2>Example source<a class="headerlink" href="#example-source" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>The base file content could be found in
EXT:extender/Tests/Fixtures/Extensions/base_extension/Classes/Domain/Model/Blob.php</p>

            
    <p>The extend file content is derived from
EXT:extender/Tests/Fixtures/Extensions/extending_extension/Classes/Domain/Model/BlobExtend.php</p>

    </section>
            <section class="section" id="important">
            <h2>Important<a class="headerlink" href="#important" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>As in both files shown, it&#039;s important to use the FQCN to extend of, else the
usage of the class gets written to the merged file and result in two classes
with the same name in the cache file.</p>

                    <div class="code-block-caption">
            <span class="caption-text">Correct extension</span>
        </div><div class="code-block-wrapper" translate="no">
                        
        <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Fixture</span>\<span class="hljs-title">ExtendingClass</span>\<span class="hljs-title">Domain</span>\<span class="hljs-title">Model</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExtendingModel</span> <span class="hljs-keyword">extends</span> \<span class="hljs-title">Fixture</span>\<span class="hljs-title">BaseClass</span>\<span class="hljs-title">Domain</span>\<span class="hljs-title">Model</span>\<span class="hljs-title">BaseModel</span>
</span>{
}</code></pre>
        <div>
            <button class="code-block-copy" title="Copy to clipboard">
                <i class="fa-regular fa-copy code-block-copy-icon"></i>
                <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
            </button>
            <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
        </div>
    </div>
                    <div class="code-block-caption">
            <span class="caption-text">Result with correct extension</span>
        </div><div class="code-block-wrapper" translate="no">
                        
        <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Fixture</span>\<span class="hljs-title">ExtendingClass</span>\<span class="hljs-title">Domain</span>\<span class="hljs-title">Model</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseModel</span>
</span>{
}</code></pre>
        <div>
            <button class="code-block-copy" title="Copy to clipboard">
                <i class="fa-regular fa-copy code-block-copy-icon"></i>
                <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
            </button>
            <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
        </div>
    </div>
            
    <p>While linting the file will not raise an error and the class is usable,
it will definitely irritate editors like PHPStorm or Visual Code.</p>

                    <div class="code-block-caption">
            <span class="caption-text">Wrong extension</span>
        </div><div class="code-block-wrapper" translate="no">
                        
        <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Fixture</span>\<span class="hljs-title">ExtendingClass</span>\<span class="hljs-title">Domain</span>\<span class="hljs-title">Model</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Fixture</span>\<span class="hljs-title">BaseClass</span>\<span class="hljs-title">Domain</span>\<span class="hljs-title">Model</span>\<span class="hljs-title">BaseModel</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExtendingModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseModel</span>
</span>{
}</code></pre>
        <div>
            <button class="code-block-copy" title="Copy to clipboard">
                <i class="fa-regular fa-copy code-block-copy-icon"></i>
                <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
            </button>
            <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
        </div>
    </div>
                    <div class="code-block-caption">
            <span class="caption-text">Result with wrong extension</span>
        </div><div class="code-block-wrapper" translate="no">
                        
        <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Fixture</span>\<span class="hljs-title">BaseClass</span>\<span class="hljs-title">Domain</span>\<span class="hljs-title">Model</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Fixture</span>\<span class="hljs-title">BaseClass</span>\<span class="hljs-title">Domain</span>\<span class="hljs-title">Model</span>\<span class="hljs-title">BaseModel</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseModel</span>
</span>{
}</code></pre>
        <div>
            <button class="code-block-copy" title="Copy to clipboard">
                <i class="fa-regular fa-copy code-block-copy-icon"></i>
                <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
            </button>
            <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
        </div>
    </div>
    </section>
    </section>
        <!-- content end -->
    </div>
</article>
                        
            <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center"><li class="page-item">
                            <a class="page-link" href="../Index.html"
                               title="Accesskey Alt(+Shift)+p">
                                Previous
                            </a>
                        </li>
                    <li class="page-item">
                            <a class="page-link" href="../Installation/Index.html"
                               title="Accesskey Alt(+Shift)+n">
                                Next
                            </a>
                        </li>
                    </ul>
        </nav>
                    </div>
            </div>
        </div>
    </main>

    <div class="modal fade" id="linkReferenceModal" tabindex="-1" aria-labelledby="linkReferenceModalLabel"
    aria-hidden="true" data-current-filename="Introduction/Index">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="linkReferenceModalLabel">Reference to the headline</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="alert alert-success d-none" id="permalink-alert-success" role="alert"></div>
                <div class="mb-3">
                    <label for="permalink-uri" class="col-form-label">Permalink</label>
                    <div class="input-group">
                        <input class="form-control code" id="permalink-uri" readonly>
                        <button type="button" class="btn btn-outline-secondary copy-button" data-target="permalink-uri"><i class="far fa-clone"></i></button>
                    </div>
                    <p>Copy and freely share the link</p>
                </div>
                <div class="mb-3">
                    <div class="alert alert-warning alert-permalink-rst" role="alert">This link target has no permanent anchor assigned.The link below can be used, but is prone to change if the page gets moved.
                    </div>
                    <label for="permalink-rst" class="col-form-label">reStructuredText (reST):</label>
                    <div class="input-group">
                        <textarea class="form-control code" id="permalink-rst" readonly></textarea>
                        <button type="button" class="btn btn-outline-secondary copy-button" data-target="permalink-rst"><i class="far fa-clone"></i></button>
                    </div>
                    <p>Copy this link into your TYPO3 manual. </p>
                </div>
                <div class="mb-3">
                    <label for="permalink-html" class="col-form-label">HTML:</label>
                    <div class="input-group">
                        <textarea class="form-control code" id="permalink-html" readonly></textarea>
                        <button type="button" class="btn btn-outline-secondary copy-button" data-target="permalink-html"><i class="far fa-clone"></i></button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div></div>


<footer class="page-footer">
    <div class="frame frame-ruler-before frame-background-dark">
        <div class="frame-container">
            <div class="frame-inner">
                                <div class="footer-additional">
                    <p class="text-center">Last rendered: May 19, 2024 17:41</p>
                </div>
                <div class="footer-meta">
                    <ul class="footer-meta-navigation">
                        <li><a href="https://typo3.org/legal-notice" rel="nofollow" target="_blank" title="Legal Notice">Legal Notice</a></li>
                        <li><a href="https://typo3.org/privacy-policy" rel="nofollow" target="_blank" title="Privacy Policy">Privacy Policy</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</footer>
<script src="../_resources/js/popper.min.js"></script>
<script src="../_resources/js/bootstrap.min.js"></script>
<script src="../_resources/js/theme.min.js"></script>

<!--
 Locally rendered. No tracking embedded.
-->
</body>
</html>